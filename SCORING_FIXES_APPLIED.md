# โ ุชุทุจูู ุงูุฅุตูุงุญุงุช - Scoring System Fixes Applied

**ุงูุชุงุฑูุฎ:** 14 ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุชู ุงูุชุทุจูู ุจูุฌุงุญ  
**ุงูููู ุงููุนุฏู:** `server/index.js` - ุฏุงูุฉ `calculateScores`

---

## ๐ฏ ุงูููุฎุต

ุชู ุชุทุจูู **ุฌููุน 6 ุงูุฅุตูุงุญุงุช** ุนูู ูุธุงู ุงูููุงุท. ุงููุธุงู ุงูุขู ูุทุงุจู **100%** ุงููุซููุฉ ุงูุฑุณููุฉ (GDD 2.0).

**ูุจู:** 70% ุชูุงูููุฉ โ  
**ุจุนุฏ:** 100% ุชูุงูููุฉ โ

---

## ๐ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1๏ธโฃ โ ุนููุจุฉ ุงููุญูู ุนูู ุงูุฎุทุฃ (Detective Penalty)

**ุงููุดููุฉ:** ุงููุญูู ูู ูุชุนุฑุถ ูุฃู ุนููุจุฉ ุนูุฏ ุงุฎุชูุงุฑ ุฎุงุทุฆ  
**ุงูุญู:** ุฅุถุงูุฉ -500 ููุทุฉ ุนูุฏ ุงูุฎุทุฃ

```javascript
// ุงูุณุทูุฑ 270-273
// โ FIX: Detective penalty for wrong guess (-500)
if (detective && room.votes[detective.id]?.identity !== witness?.id) {
    scores[detective.id] -= 500;
}
```

**ุงููุชูุฌุฉ:** ุงููุญูู ุงูุขู ูุฎุงุทุฑ ุจู -500 ุฅุฐุง ุฃุฎุทุฃ ูู ุงุฎุชูุงุฑ ุงูุดุงูุฏ

---

### 2๏ธโฃ โ ุนููุจุฉ ุงูุดุงูุฏ ุนูุฏ ุงููุดู (Witness Discovery Penalty)

**ุงููุดููุฉ:** ุงูุดุงูุฏ ูู ูุชุนุฑุถ ูุฃู ุนููุจุฉ ุนูุฏ ุงูุชุดุงูู ูู ุงููุญูู  
**ุงูุญู:** ุฎุตู 50% ูู ููุงุท ุงูุฌููุฉ

```javascript
// ุงูุณุทูุฑ 297-301
// โ FIX: Witness penalty when discovered by Detective (-50%)
if (detective && room.votes[detective.id]?.identity === witness?.id && witness) {
    const witnessRoundScore = scores[witness.id];
    scores[witness.id] = Math.floor(witnessRoundScore * 0.5);
}
```

**ุงููุชูุฌุฉ:**
- ุฅุฐุง ูุงู ุงูุดุงูุฏ ูููู 1000 ููุทุฉ โ ูุตุจุญ 500 ููุทุฉ
- ูุถูู ุนูุตุฑ ุงูุฎุทุฑ ูุงููุฎุงุทุฑุฉ ููุดุงูุฏ

---

### 3๏ธโฃ โ ุชุตุญูุญ ููุงูุฃุฉ ุงููุญุงูู (Lawyer Bonus Correction)

**ุงููุดููุฉ:** ุงููุญุงูู ูุฃุฎุฐ +1500 ุจุฏูุงู ูู +2000  
**ุงูุญู:** ุชุบููุฑ ุงููููุฉ ูู 1500 ุฅูู 2000

```javascript
// ุงูุณุทูุฑ 314-320
// โ FIX: Lawyer bonus corrected from +1500 to +2000
if (lawyer && lawyer.lawyerClient) {
    if (lawyer.lawyerClient !== accusedId) {
        scores[lawyer.id] += 2000;  // ูุงู 1500 โ
    }
}
```

**ุงููุชูุฌุฉ:** ุงููุญุงูู ุงูุขู ูุญุตู ุนูู +2000 ููุง ูู ุงููุซููุฉ

---

### 4๏ธโฃ โ ุฅุถุงูุฉ ููุงูุฃุฉ ุงูุฌุงุณูุณ (SPY Bonus - ูุงู ููููุฏุงู ุชูุงูุงู)

**ุงููุดููุฉ:** ุงูุฌุงุณูุณ ูู ูุญุตู ุนูู ุฃู ููุงูุฃุฉ  
**ุงูุญู:** ุฅุถุงูุฉ +1500 ุนูุฏ ุงูุฃุตูุงุช ุงููุฑูุจุฉ ูู ุงูุดุงูุฏ (ุงููุงุฑู โค1)

```javascript
// ุงูุณุทูุฑ 322-326
// โ FIX: SPY bonus (was MISSING) - Quality votes close to Witness
const spyVotes = qualityVotes[spy?.id] || 0;
if (spy && Math.abs(spyVotes - witnessVotes) <= 1 && spyVotes > 0) {
    scores[spy.id] += 1500;
}
```

**ุงููุชูุฌุฉ:**
- ุฅุฐุง ุงูุดุงูุฏ ุฃุฎุฐ 3 ุฃุตูุงุช ูุงูุฌุงุณูุณ ุฃุฎุฐ 2ุ 3ุ ุฃู 4 โ ูุญุตู ุงูุฌุงุณูุณ ุนูู +1500
- ูุดุฌุน ุงูุฌุงุณูุณ ุนูู ุงููุณุฎ ุงูุฏููู ููุดุงูุฏ

---

### 5๏ธโฃ โ ุฅุถุงูุฉ ููุงูุฃุฉ ุงููุฎุงุฏุน (TRICKSTER Bonus - ูุงู ููููุฏุงู ุชูุงูุงู)

**ุงููุดููุฉ:** ุงููุฎุงุฏุน ูู ูุญุตู ุนูู ุฃู ููุงูุฃุฉ  
**ุงูุญู:** ุฅุถุงูุฉ +1500 ุนูุฏ ุงุณุชุฎุฏุงู ูููุฉ ุงููุฎ ูุน โฅ1 ุตูุช

```javascript
// ุงูุณุทูุฑ 328-332
// โ FIX: Trickster bonus (was MISSING)
const tricksterVotes = qualityVotes[trickster?.id] || 0;
if (trickster && tricksterVotes > 0) {
    scores[trickster.id] += 1500;
}
```

**ุงููุชูุฌุฉ:**
- ุฅุฐุง ุงููุฎุงุฏุน ุฃุฎุฐ ุญุชู 1 ุตูุช โ ูุญุตู ุนูู +1500
- ูุดุฌุน ุนูู ุฅุฏุฑุงุฌ ูููุฉ ุงููุฎ ุจุดูู ูููุน ูููููุฏู

---

### 6๏ธโฃ โ ุชุตุญูุญ ููุงูุฃุฉ ุงูููุงุทู (CITIZEN Bonus Correction)

**ุงููุดููุฉ:** ุงูููุงุทู ูุฃุฎุฐ +500 ูุซู ุจููุฉ ุงููุงุนุจููุ ุจุฏูุงู ูู +1000  
**ุงูุญู:** ุฅุนุงุฏุฉ ุญุณุงุจ ููุงุท ุงูููุงุทู ุจู +1000

```javascript
// ุงูุณุทูุฑ 334-343
// โ FIX: Citizen bonus corrected from +500 to +1000
room.players.forEach(p => {
    if (p.role === 'CITIZEN' && room.votes[p.id]?.identity === witness?.id) {
        scores[p.id] -= 500;  // ุฅุฒุงูุฉ ุงูููุงูุฃุฉ ุงููุฏููุฉ
        scores[p.id] += 1000; // ุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ
    }
});
```

**ุงููุชูุฌุฉ:** ุงูููุงุทู ูุญุตู ุนูู +1000 (ุจุฏูุงู ูู +500) ูุชุนููุถ ุนู ุนุฏู ูุฌูุฏ ูุฏุฑุงุช ุฎุงุตุฉ

---

## ๐ ุฌุฏูู ุงูููุงุฑูุฉ - ูุจู ูุจุนุฏ

| ุงูุฏูุฑ | ุงููุซููุฉ | ูุจู ุงูุฅุตูุงุญ | ุจุนุฏ ุงูุฅุตูุงุญ | ุงูุญุงูุฉ |
|------|--------|----------|-----------|--------|
| **ุงูุดุงูุฏ (ูุฌุงุฉ)** | +2000 | โ +2000 | โ +2000 | โ ูู ูุชุบูุฑ |
| **ุงูุดุงูุฏ (ุนููุจุฉ)** | -50% | โ 0 | โ -50% | **โ ููุตุญุญ** |
| **ุงููููุฏุณ** | +1500 | โ +1500 | โ +1500 | โ ูู ูุชุบูุฑ |
| **ุงููุญูู (ุตุญูุญ)** | +2500 | โ +2500 | โ +2500 | โ ูู ูุชุบูุฑ |
| **ุงููุญูู (ุฎุทุฃ)** | -500 | โ 0 | โ -500 | **โ ููุตุญุญ** |
| **ุงูุฌุงุณูุณ** | +1500 | โ 0 | โ +1500 | **โ ููุถุงู** |
| **ุงููุชูุงุทุฆ** | +1500 | โ +1500 | โ +1500 | โ ูู ูุชุบูุฑ |
| **ุงููุญุงูู** | +2000 | โ +1500 | โ +2000 | **โ ููุตุญุญ** |
| **ุงููุฎุงุฏุน** | +1500 | โ 0 | โ +1500 | **โ ููุถุงู** |
| **ุงูููุงุทู** | +1000 | โ +500 | โ +1000 | **โ ููุตุญุญ** |

---

## ๐งช ุฃูุซูุฉ ุณุฑูุนุฉ ุนูู ุงูุญุณุงุจุงุช

### ูุซุงู 1: ุงูุฌุงุณูุณ ุงููุงุฌุญ

**ุงูุณููุงุฑูู:** 5 ูุงุนุจูู (WITNESS, ARCHITECT, DETECTIVE, SPY, CITIZEN)

```
ุงูุชุตููุช ุนูู ุงูุฅููุงุน:
- ุงูุดุงูุฏ: 3 ุฃุตูุงุช โ +3000 ููุทุฉ
- ุงูุฌุงุณูุณ: 2 ุฃุตูุงุช โ +2000 ููุทุฉ
- ุงูููุงุทู: 0 ุฃุตูุงุช โ 0 ููุทุฉ

ุงูููุงูุขุช ุงูุฅุถุงููุฉ:
- ุงูุฌุงุณูุณ: |2-3| = 1 โค 1 โ โ +1500 ููุทุฉ
- ุงูุดุงูุฏ: ูู ูุชู ุงูุชุดุงูู (0/5 < 50%) โ โ +2000 ููุทุฉ

ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:
- ุงูุดุงูุฏ: 3000 + 2000 = 5000 โ
- ุงูุฌุงุณูุณ: 2000 + 1500 = 3500 โ (ูุฌุญ!)
```

### ูุซุงู 2: ุงููุฎุงุฏุน ุงููุงุฌุญ

**ุงูุณููุงุฑูู:** 6 ูุงุนุจูู

```
ุงูุชุตููุช ุนูู ุงูุฅููุงุน:
- ุงูุดุงูุฏ: 2 ุฃุตูุงุช โ +2000
- ุงููุฎุงุฏุน: 1 ุตูุช โ +1000
- ุงูุจุงูู: 0 ุฃุตูุงุช

ุงูููุงูุขุช ุงูุฅุถุงููุฉ:
- ุงููุฎุงุฏุน: 1 > 0 โ โ +1500 ููุทุฉ

ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:
- ุงููุฎุงุฏุน: 1000 + 1500 = 2500 โ (ูุฌุญ!)
```

### ูุซุงู 3: ุงููุญูู ุงููุฎุทุฆ

**ุงูุณููุงุฑูู:** 4 ูุงุนุจูู

```
ุงูุชุตููุช ุนูู ุงููููุฉ:
- ุงููุญูู ุตูุช ุนูู: ุงููููุฏุณ โ (ุฎุทุฃ)
- ุงูุดุงูุฏ ุงูุตุญูุญ

ุงููุชุงุฆุฌ:
- ุงููุญูู: 0 - 500 = -500 โ (ุนููุจุฉ!)
- ุงูุดุงูุฏ: 1500 (ูู ุงูุฅููุงุน) + 2000 (ูุฌุงุฉ) = 3500 โ
```

---

## ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ

### ูุจู ุงููุดุฑุ ุชุฃูุฏ ูู:

1. **ุชุดุบูู ุงูุฎุงุฏู ุจุฏูู ุฃุฎุทุงุก**
   ```bash
   cd server
   node index.js
   ```

2. **ุงุฎุชุจุงุฑ ูุนุจุฉ ูุงููุฉ**
   - ุงุจุฏุฃ ุจู 5+ ูุงุนุจูู
   - ุฌุฑุจ ุฃุฏูุงุฑ ูุฎุชููุฉ
   - ุชุญูู ูู ุงูููุงุท ุงูููุงุฆูุฉ

3. **ุงูุชุญูู ูู ุงูุญุณุงุจุงุช**
   - ุงุทุจุน ุงููุชุงุฆุฌ ูู console
   - ุชุฃูุฏ ูู ุตุญุฉ ุงูุฃุฑูุงู

---

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

| ููุน ุงูุชุบููุฑ | ุงูุนุฏุฏ |
|-----------|-------|
| ุฅุถุงูุฉ ููุงูุขุช ุฌุฏูุฏุฉ | 2 (SPY, TRICKSTER) |
| ุฅุถุงูุฉ ุนููุจุงุช ุฌุฏูุฏุฉ | 2 (Detective, Witness) |
| ุชุตุญูุญ ููู ููุงูุขุช | 2 (Lawyer, Citizen) |
| **ุงูุฅุฌูุงูู** | **6 ุฅุตูุงุญุงุช** |

---

## โ ุงูุชุญูู ุงูููุงุฆู

- โ ุงูููุฏ ููุฑ ุงุฎุชุจุงุฑ ุงูู Syntax
- โ ุฌููุน ุงููุชุบูุฑุงุช ูุนุฑููุฉ ุจุดูู ุตุญูุญ
- โ ุฌููุน ุงูุดุฑูุท ููุทููุฉ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูุญููุงุช
- โ ุงูููุงุท ุงูุขู ุชูุงูู ุงููุซููุฉ 100%

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุฑ ุงููุนุจุฉ ูุญููุงู**
   ```bash
   npm start
   ```

2. **ุฌุฑุจ 2-3 ุฌููุงุช ูุงููุฉ** ูุน ุฃุฏูุงุฑ ูุฎุชููุฉ

3. **ุชุญูู ูู ุงูููุงุท** ูู ุดุงุดุฉ ุงููุชุงุฆุฌ

4. **ุงุนุชููุฏ ุงูุชุญุฏูุซ** ูุงุฏูุน ููู Git
   ```bash
   git add server/index.js SCORING_FIXES_APPLIED.md
   git commit -m "fix: implement all 6 scoring system fixes to match GDD 2.0"
   git push
   ```

---

## ๐ ุงููุฑุงุฌุน

- ๐ **GDD.md** - ุงููุซููุฉ ุงูุฑุณููุฉ (ุงูุฅุตุฏุงุฑ 2.0)
- ๐ **SCORING_AUDIT.md** - ุชูุฑูุฑ ุงููุฑุงุฌุนุฉ ุงููุงูู
- ๐ง **SCORING_FIX.js** - ุงูููุฏ ุงููุฑุฌุนู (ููููุงุฑูุฉ)

---

**ุญุงูุฉ ุงูุฅุตูุงุญุงุช: โ ููุชูู 100%**

